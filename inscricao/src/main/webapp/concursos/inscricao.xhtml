<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/WEB-INF/template/LayoutPadrao.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui">


    <ui:define name="titulo">Inscrição</ui:define>

    <ui:define name="corpo">

        <f:metadata>
            <o:viewParam name="concurso" value="#{inscricaoBean.concurso}" />
            <f:event listener="#{inscricaoBean.inicializar()}" type="preRenderView"/>
        </f:metadata>
        <h:form>
            <h1>Inscrição</h1>

            <p:panelGrid columns="2" id="painel" style="width: 100%; margin-top: 20px;"
                         columnClasses="rotulo, campo">
                <p:outputLabel for="nivelCargo" value="Nível"/>
                <p:selectOneMenu id="nivelCargo" value="#{inscricaoBean.nivel}">
                    <f:selectItem itemLabel="Selecione um nível..."/>
                    <f:selectItems value="#{inscricaoBean.niveis}" var="nivel"
                                   itemValue="#{nivel}" itemLabel="#{nivel.descricao}"/>
                    <p:ajax event="change" process="@this" update="cargo" listener="#{inscricaoBean.carregarCargos()}"/>
                </p:selectOneMenu>

                <p:outputLabel for="cargo" value="Cargo"/>
                <p:selectOneMenu id="cargo" value="#{inscricaoBean.inscricao.cargoConcurso}">
                    <f:selectItem itemLabel="Selecione um cargo..."/>
                    <f:selectItems value="#{inscricaoBean.cargosConcurso}" var="cargo"
                                   itemValue="#{cargo}" itemLabel="#{cargo.cargo.descricao}"/>
                </p:selectOneMenu>


            </p:panelGrid>
        </h:form>

    </ui:define>

</ui:composition>